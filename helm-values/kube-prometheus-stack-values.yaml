alertmanager:
  enabled: true
  config:
    global:
      resolve_timeout: 5m
    route:
      receiver: "default"
      group_by: ["alertname", "namespace"]
      group_wait: 30s
      group_interval: 5m
      repeat_interval: 2h
    receivers:
      - name: "default"
        slack_configs:
          - channel: "#alerts"
            send_resolved: true
            text: "{{ range .Alerts }}*{{ .Labels.alertname }}*: {{ .Annotations.summary }}\n{{ .Annotations.description }}\n{{ end }}"

grafana:
  enabled: true
  defaultDashboardsEnabled: false
  sidecar:
    dashboards:
      enabled: true
      label: grafana_dashboard
      folder: /var/lib/grafana/dashboards
  adminPassword: "change-me"

prometheus:
  prometheusSpec:
    retention: 15d
    serviceMonitorSelectorNilUsesHelmValues: false
    podMonitorSelectorNilUsesHelmValues: false
    ruleSelectorNilUsesHelmValues: false
    additionalScrapeConfigs:
      - job_name: custom-metrics-app
        kubernetes_sd_configs:
          - role: pod
        relabel_configs:
          - action: keep
            source_labels: [__meta_kubernetes_pod_label_app]
            regex: custom-metrics-app
          - action: replace
            source_labels: [__meta_kubernetes_pod_ip]
            target_label: __address__
            replacement: "$1:8000"
          - action: replace
            target_label: __metrics_path__
            replacement: /metrics

kube-state-metrics:
  enabled: true

nodeExporter:
  enabled: true
